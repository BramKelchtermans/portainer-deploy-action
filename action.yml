name: Deploy to Portainer
description: Deploys Docker Compose files to a Portainer instance.
author: Your Name

branding:
  icon: upload-cloud
  color: blue

inputs:
  portainer_url:
    description: 'The URL of the Portainer instance'
    required: true
    default: ''
  portainer_api_key:
    description: 'The API key for Portainer authentication'
    required: true
    default: ''
  changed_files_path:
    description: 'Path to the file containing changed Docker Compose files'
    required: true
    default: ''
  repository_url:
    description: 'The URL of the Docker repository'
    required: true
    default: ''
  repository_username:
    description: 'The username for the Docker repository'
    required: true
    default: ''
  repository_password:
    description: 'The password for the Docker repository'
    required: true
    default: ''
  environment:
    description: 'The environment to deploy to'
    required: false
    default: 'default'

outputs:
  status:
    description: 'Status of the deployment'
runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - ${{ inputs.portainer_url }}
    - ${{ inputs.portainer_api_key }}
    - ${{ inputs.changed_files_path }}
    - ${{ inputs.repository_url }}
    - ${{ inputs.repository_username }}
    - ${{ inputs.repository_password }}
    - ${{ inputs.environment }}